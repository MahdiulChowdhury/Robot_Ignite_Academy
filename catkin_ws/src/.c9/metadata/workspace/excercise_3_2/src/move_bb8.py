{"filter":false,"title":"move_bb8.py","tooltip":"/excercise_3_2/src/move_bb8.py","undoManager":{"mark":100,"position":100,"stack":[[{"start":{"row":60,"column":12},"end":{"row":61,"column":0},"action":"insert","lines":["",""],"id":2382},{"start":{"row":61,"column":0},"end":{"row":61,"column":12},"action":"insert","lines":["            "]}],[{"start":{"row":61,"column":12},"end":{"row":61,"column":13},"action":"insert","lines":["i"],"id":2383}],[{"start":{"row":61,"column":13},"end":{"row":61,"column":14},"action":"insert","lines":[" "],"id":2384}],[{"start":{"row":61,"column":14},"end":{"row":61,"column":15},"action":"insert","lines":["+"],"id":2385}],[{"start":{"row":61,"column":15},"end":{"row":61,"column":16},"action":"insert","lines":[" "],"id":2386}],[{"start":{"row":61,"column":15},"end":{"row":61,"column":16},"action":"remove","lines":[" "],"id":2387}],[{"start":{"row":61,"column":14},"end":{"row":61,"column":15},"action":"remove","lines":["+"],"id":2388}],[{"start":{"row":61,"column":14},"end":{"row":61,"column":15},"action":"insert","lines":["+"],"id":2389}],[{"start":{"row":61,"column":15},"end":{"row":61,"column":16},"action":"insert","lines":["="],"id":2390}],[{"start":{"row":61,"column":16},"end":{"row":61,"column":17},"action":"insert","lines":[" "],"id":2391}],[{"start":{"row":61,"column":17},"end":{"row":61,"column":18},"action":"insert","lines":["`"],"id":2392}],[{"start":{"row":61,"column":17},"end":{"row":61,"column":18},"action":"remove","lines":["`"],"id":2393}],[{"start":{"row":61,"column":17},"end":{"row":61,"column":18},"action":"insert","lines":["1"],"id":2394}],[{"start":{"row":61,"column":18},"end":{"row":61,"column":19},"action":"insert","lines":[" "],"id":2395}],[{"start":{"row":61,"column":19},"end":{"row":62,"column":0},"action":"insert","lines":["",""],"id":2396},{"start":{"row":62,"column":0},"end":{"row":62,"column":12},"action":"insert","lines":["            "]}],[{"start":{"row":62,"column":8},"end":{"row":62,"column":12},"action":"remove","lines":["    "],"id":2397}],[{"start":{"row":62,"column":8},"end":{"row":62,"column":9},"action":"insert","lines":["r"],"id":2398}],[{"start":{"row":62,"column":9},"end":{"row":62,"column":10},"action":"insert","lines":["o"],"id":2399}],[{"start":{"row":62,"column":10},"end":{"row":62,"column":11},"action":"insert","lines":["s"],"id":2400}],[{"start":{"row":62,"column":11},"end":{"row":62,"column":12},"action":"insert","lines":["p"],"id":2401}],[{"start":{"row":62,"column":8},"end":{"row":62,"column":12},"action":"remove","lines":["rosp"],"id":2402},{"start":{"row":62,"column":8},"end":{"row":62,"column":13},"action":"insert","lines":["rospy"]}],[{"start":{"row":62,"column":13},"end":{"row":62,"column":14},"action":"insert","lines":["."],"id":2403}],[{"start":{"row":62,"column":14},"end":{"row":62,"column":15},"action":"insert","lines":["l"],"id":2404}],[{"start":{"row":62,"column":15},"end":{"row":62,"column":16},"action":"insert","lines":["o"],"id":2405}],[{"start":{"row":62,"column":16},"end":{"row":62,"column":17},"action":"insert","lines":["n"],"id":2406}],[{"start":{"row":62,"column":16},"end":{"row":62,"column":17},"action":"remove","lines":["n"],"id":2407}],[{"start":{"row":62,"column":16},"end":{"row":62,"column":17},"action":"insert","lines":["g"],"id":2408}],[{"start":{"row":62,"column":17},"end":{"row":62,"column":18},"action":"insert","lines":["i"],"id":2409}],[{"start":{"row":62,"column":18},"end":{"row":62,"column":19},"action":"insert","lines":["n"],"id":2410}],[{"start":{"row":62,"column":14},"end":{"row":62,"column":19},"action":"remove","lines":["login"],"id":2411},{"start":{"row":62,"column":14},"end":{"row":62,"column":21},"action":"insert","lines":["loginfo"]}],[{"start":{"row":62,"column":21},"end":{"row":62,"column":23},"action":"insert","lines":["()"],"id":2412}],[{"start":{"row":62,"column":22},"end":{"row":62,"column":23},"action":"insert","lines":[" "],"id":2413}],[{"start":{"row":62,"column":22},"end":{"row":62,"column":23},"action":"remove","lines":[" "],"id":2414}],[{"start":{"row":62,"column":22},"end":{"row":62,"column":24},"action":"insert","lines":["\"\""],"id":2415}],[{"start":{"row":62,"column":23},"end":{"row":62,"column":24},"action":"insert","lines":["#"],"id":2416}],[{"start":{"row":62,"column":24},"end":{"row":62,"column":25},"action":"insert","lines":["#"],"id":2417}],[{"start":{"row":62,"column":25},"end":{"row":62,"column":26},"action":"insert","lines":["#"],"id":2418}],[{"start":{"row":62,"column":26},"end":{"row":62,"column":27},"action":"insert","lines":["#"],"id":2419}],[{"start":{"row":62,"column":27},"end":{"row":62,"column":28},"action":"insert","lines":["#"],"id":2420}],[{"start":{"row":62,"column":28},"end":{"row":62,"column":29},"action":"insert","lines":[" "],"id":2421}],[{"start":{"row":62,"column":29},"end":{"row":62,"column":30},"action":"insert","lines":["F"],"id":2422}],[{"start":{"row":62,"column":30},"end":{"row":62,"column":31},"action":"insert","lines":["i"],"id":2423}],[{"start":{"row":62,"column":31},"end":{"row":62,"column":32},"action":"insert","lines":["n"],"id":2424}],[{"start":{"row":62,"column":32},"end":{"row":62,"column":33},"action":"insert","lines":["i"],"id":2425}],[{"start":{"row":62,"column":29},"end":{"row":62,"column":33},"action":"remove","lines":["Fini"],"id":2426},{"start":{"row":62,"column":29},"end":{"row":62,"column":37},"action":"insert","lines":["Finished"]}],[{"start":{"row":62,"column":37},"end":{"row":62,"column":38},"action":"insert","lines":[" "],"id":2427}],[{"start":{"row":62,"column":38},"end":{"row":62,"column":39},"action":"insert","lines":["M"],"id":2428}],[{"start":{"row":62,"column":39},"end":{"row":62,"column":40},"action":"insert","lines":["o"],"id":2429}],[{"start":{"row":62,"column":40},"end":{"row":62,"column":41},"action":"insert","lines":["v"],"id":2430}],[{"start":{"row":62,"column":41},"end":{"row":62,"column":42},"action":"insert","lines":["i"],"id":2431}],[{"start":{"row":62,"column":42},"end":{"row":62,"column":43},"action":"insert","lines":["n"],"id":2432}],[{"start":{"row":62,"column":43},"end":{"row":62,"column":44},"action":"insert","lines":["g"],"id":2433}],[{"start":{"row":62,"column":44},"end":{"row":62,"column":45},"action":"insert","lines":[" "],"id":2434}],[{"start":{"row":62,"column":45},"end":{"row":62,"column":46},"action":"insert","lines":["i"],"id":2435}],[{"start":{"row":62,"column":46},"end":{"row":62,"column":47},"action":"insert","lines":["n"],"id":2436}],[{"start":{"row":62,"column":47},"end":{"row":62,"column":48},"action":"insert","lines":[" "],"id":2437}],[{"start":{"row":62,"column":48},"end":{"row":62,"column":49},"action":"insert","lines":["a"],"id":2438}],[{"start":{"row":62,"column":49},"end":{"row":62,"column":50},"action":"insert","lines":[" "],"id":2439}],[{"start":{"row":62,"column":50},"end":{"row":62,"column":51},"action":"insert","lines":["s"],"id":2440}],[{"start":{"row":62,"column":51},"end":{"row":62,"column":52},"action":"insert","lines":["q"],"id":2441}],[{"start":{"row":62,"column":52},"end":{"row":62,"column":53},"action":"insert","lines":["a"],"id":2442}],[{"start":{"row":62,"column":53},"end":{"row":62,"column":54},"action":"insert","lines":["u"],"id":2443}],[{"start":{"row":62,"column":53},"end":{"row":62,"column":54},"action":"remove","lines":["u"],"id":2444}],[{"start":{"row":62,"column":52},"end":{"row":62,"column":53},"action":"remove","lines":["a"],"id":2445}],[{"start":{"row":62,"column":52},"end":{"row":62,"column":53},"action":"insert","lines":["u"],"id":2446}],[{"start":{"row":62,"column":53},"end":{"row":62,"column":54},"action":"insert","lines":["a"],"id":2447}],[{"start":{"row":62,"column":54},"end":{"row":62,"column":55},"action":"insert","lines":["r"],"id":2448}],[{"start":{"row":62,"column":55},"end":{"row":62,"column":56},"action":"insert","lines":["e"],"id":2449}],[{"start":{"row":62,"column":56},"end":{"row":62,"column":57},"action":"insert","lines":[" "],"id":2450}],[{"start":{"row":62,"column":56},"end":{"row":62,"column":57},"action":"remove","lines":[" "],"id":2451}],[{"start":{"row":5,"column":16},"end":{"row":5,"column":17},"action":"insert","lines":["e"],"id":2452}],[{"start":{"row":5,"column":16},"end":{"row":5,"column":17},"action":"remove","lines":["e"],"id":2453}],[{"start":{"row":9,"column":22},"end":{"row":9,"column":23},"action":"remove","lines":["f"],"id":2454}],[{"start":{"row":9,"column":22},"end":{"row":9,"column":23},"action":"insert","lines":["F"],"id":2455}],[{"start":{"row":18,"column":7},"end":{"row":18,"column":8},"action":"remove","lines":[" "],"id":2456},{"start":{"row":18,"column":7},"end":{"row":18,"column":8},"action":"insert","lines":[" "]}],[{"start":{"row":18,"column":8},"end":{"row":18,"column":12},"action":"insert","lines":["    "],"id":2457}],[{"start":{"row":19,"column":0},"end":{"row":19,"column":4},"action":"insert","lines":["    "],"id":2458},{"start":{"row":20,"column":0},"end":{"row":20,"column":4},"action":"insert","lines":["    "]},{"start":{"row":21,"column":0},"end":{"row":21,"column":4},"action":"insert","lines":["    "]}],[{"start":{"row":22,"column":8},"end":{"row":22,"column":12},"action":"insert","lines":["    "],"id":2459}],[{"start":{"row":23,"column":11},"end":{"row":23,"column":12},"action":"insert","lines":[" "],"id":2460}],[{"start":{"row":23,"column":12},"end":{"row":23,"column":13},"action":"remove","lines":[" "],"id":2461}],[{"start":{"row":23,"column":12},"end":{"row":23,"column":16},"action":"insert","lines":["    "],"id":2462}],[{"start":{"row":3,"column":38},"end":{"row":4,"column":0},"action":"insert","lines":["",""],"id":2464}],[{"start":{"row":4,"column":0},"end":{"row":4,"column":1},"action":"insert","lines":["i"],"id":2465}],[{"start":{"row":4,"column":1},"end":{"row":4,"column":2},"action":"insert","lines":["m"],"id":2466}],[{"start":{"row":4,"column":2},"end":{"row":4,"column":3},"action":"insert","lines":["p"],"id":2467}],[{"start":{"row":4,"column":3},"end":{"row":4,"column":4},"action":"insert","lines":["o"],"id":2468}],[{"start":{"row":4,"column":4},"end":{"row":4,"column":5},"action":"insert","lines":["r"],"id":2469}],[{"start":{"row":4,"column":5},"end":{"row":4,"column":6},"action":"insert","lines":["t"],"id":2470}],[{"start":{"row":4,"column":6},"end":{"row":4,"column":7},"action":"insert","lines":[" "],"id":2471}],[{"start":{"row":4,"column":7},"end":{"row":4,"column":8},"action":"insert","lines":["t"],"id":2472}],[{"start":{"row":4,"column":8},"end":{"row":4,"column":9},"action":"insert","lines":["i"],"id":2473}],[{"start":{"row":4,"column":9},"end":{"row":4,"column":10},"action":"insert","lines":["m"],"id":2474}],[{"start":{"row":4,"column":10},"end":{"row":4,"column":11},"action":"insert","lines":["e"],"id":2475}],[{"start":{"row":4,"column":11},"end":{"row":4,"column":12},"action":"insert","lines":[" "],"id":2476}],[{"start":{"row":4,"column":11},"end":{"row":4,"column":12},"action":"remove","lines":[" "],"id":2477}],[{"start":{"row":60,"column":44},"end":{"row":60,"column":45},"action":"insert","lines":["."],"id":2478}],[{"start":{"row":60,"column":45},"end":{"row":60,"column":46},"action":"insert","lines":["1"],"id":2479}],[{"start":{"row":0,"column":0},"end":{"row":75,"column":0},"action":"remove","lines":["import rospy ","","from geometry_msgs.msg import Twist, Vector3 ","from sensor_msgs.msg import LaserScan ","import time","","class MoveBB8():","    ","    def __init__(self):","        self.bb8_vel_publisher = rospy.Publisher('/cmd_vel',Twist,queue_size=1) ","        self.ctrl_c = False ","        rospy.on_shutdown(self.shutdownhook)","        self.rate = rospy.Rate(10)","        ","        ","    def publish_once_in_cmd_vel(self,cmd):","        ","        while not self.ctrl_c: ","            connections = self.bb8_vel_publisher.get_num_connections()","            if connections > 0: ","                self.bb8_vel_publisher.publish(cmd)","                rospy.loginfo(\"Cmd Published\")","                break ","            else: ","                self.rate.sleep()","            ","    def shutdownhook(self):","        self.stop_bb8() ","        self.ctrl_c = True","        ","    def stop_bb8(self):","        rospy.loginfo(\"shutdown time! Stop the robot\")","        cmd = Twist() ","        cmd.linear.x = 0.0 ","        cmd.angular.z = 0.0 ","        self.publish_once_in_cmd_vel(cmd)","    ","    def move_x_time (self, moving_time, linear_speed = 0.2, angular_speed = 0.2):","        ","        cmd = Twist() ","        cmd.linear.x = linear_speed","        cmd.linear.z = angular_speed","        ","        rospy.loginfo(\"Moving Forwards\")","        self.publish_once_in_cmd_vel(cmd)","        time.sleep(moving_time)","        self.stop_bb8()","        rospy.loginfo(\"####Finished Moving Forwards\")","        ","    def move_square(self):","        ","        i = 0 ","        while not self.ctrl_c and i < 4:","            #Move Forwards ","            self.move_x_time(moving_time = 2.0, linear_speed = 0.2, angular_speed = 0.0)","            #Stop","            self.move_x_time(moving_time = 4.0, linear_speed = 0.0, angular_speed = 0.0)","            #Turn ","            self.move_x_time(moving_time = 3.5, linear_speed = 0.0, angular_speed = 0.2)","            #Stop ","            self.move_x_time(moving_time = 0.1, linear_speed = 0.0, angular_speed = 0.0)","            ","            i += 1 ","        rospy.loginfo(\"##### Finished Moving in a square\")","            ","        ","        ","        ","if __name__ == '__main__':","    rospy.init_node('move_bb8_test',anonymous = True)","    movebb8_object = MoveBB8() ","    try: ","        movebb8_object.move_square() ","    except rospy.ROSInterruptException: ","        pass ",""],"id":2480}],[{"start":{"row":0,"column":0},"end":{"row":81,"column":0},"action":"insert","lines":["#!/usr/bin/env python","import rospy","from geometry_msgs.msg import Twist","import time","","class MoveBB8():","    ","    def __init__(self):","        self.bb8_vel_publisher = rospy.Publisher('/cmd_vel', Twist, queue_size=1)","        self.ctrl_c = False","        rospy.on_shutdown(self.shutdownhook)","        self.rate = rospy.Rate(10) # 10hz","    ","    ","    ","    def publish_once_in_cmd_vel(self, cmd):","        \"\"\"","        This is because publishing in topics sometimes fails teh first time you publish.","        In continuos publishing systems there is no big deal but in systems that publish only","        once it IS very important.","        \"\"\"","        while not self.ctrl_c:","            connections = self.bb8_vel_publisher.get_num_connections()","            if connections > 0:","                self.bb8_vel_publisher.publish(cmd)","                rospy.loginfo(\"Cmd Published\")","                break","            else:","                self.rate.sleep()","    ","    ","    def shutdownhook(self):","            # works better than the rospy.is_shut_down()","            self.stop_bb8()","            self.ctrl_c = True","","    def stop_bb8(self):","        rospy.loginfo(\"shutdown time! Stop the robot\")","        cmd = Twist()","        cmd.linear.x = 0.0","        cmd.angular.z = 0.0","        self.publish_once_in_cmd_vel(cmd)","","","    def move_x_time(self, moving_time, linear_speed=0.2, angular_speed=0.2):","        ","        cmd = Twist()","        cmd.linear.x = linear_speed","        cmd.angular.z = angular_speed","        ","        rospy.loginfo(\"Moving Forwards\")","        self.publish_once_in_cmd_vel(cmd)","        time.sleep(moving_time)","        self.stop_bb8()","        rospy.loginfo(\"######## Finished Moving Forwards\")","    ","    def move_square(self):","        ","        i = 0","        while not self.ctrl_c and i < 4:","            # Move Forwards","            self.move_x_time(moving_time=2.0, linear_speed=0.2, angular_speed=0.0)","            # Stop","            self.move_x_time(moving_time=4.0, linear_speed=0.0, angular_speed=0.0)","            # Turn ","            self.move_x_time(moving_time=3.5, linear_speed=0.0, angular_speed=0.2)","            # Stop","            self.move_x_time(moving_time=0.1, linear_speed=0.0, angular_speed=0.0)","            ","            i += 1","        rospy.loginfo(\"######## Finished Moving in a Square\")","        ","","            ","if __name__ == '__main__':","    rospy.init_node('move_bb8_test', anonymous=True)","    movebb8_object = MoveBB8()","    try:","        movebb8_object.move_square()","    except rospy.ROSInterruptException:","        pass",""],"id":2481}],[{"start":{"row":16,"column":8},"end":{"row":20,"column":11},"action":"remove","lines":["\"\"\"","        This is because publishing in topics sometimes fails teh first time you publish.","        In continuos publishing systems there is no big deal but in systems that publish only","        once it IS very important.","        \"\"\""],"id":2482}],[{"start":{"row":16,"column":4},"end":{"row":16,"column":8},"action":"remove","lines":["    "],"id":2483}]]},"ace":{"folds":[],"scrolltop":0,"scrollleft":0,"selection":{"start":{"row":16,"column":4},"end":{"row":16,"column":4},"isBackwards":false},"options":{"guessTabSize":true,"useWrapMode":false,"wrapToView":true},"firstLineState":0},"timestamp":1547412220502,"hash":"7299a7fd186ec9006b1c18e5ef308c616abd062a"}